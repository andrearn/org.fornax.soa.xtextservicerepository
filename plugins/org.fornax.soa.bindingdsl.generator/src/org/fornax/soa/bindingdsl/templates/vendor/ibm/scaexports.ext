import serviceDsl;
import bindingDsl;
import sOABaseDsl;

extension org::fornax::soa::basedsl::version::versionQualifying;
extension org::fornax::soa::environmentdsl::generator::endpoints;
extension org::fornax::soa::servicedsl::query::namespace::subnamespaces;
extension org::fornax::soa::servicedsl::templates::common;
extension org::fornax::soa::servicedsl::templates::xsd::domains;
extension org::fornax::soa::bindingdsl::templates::bindings;

String getExportName (Service s, BindingProtocol prot) : 
	s.getOrgNamespace().toPrefix() + "_" + s.getSubdomain().name.replaceAll("\\.", "_") + "_" + 
	s.name + s.getServiceVisibilityName() + "_" + s.version.toVersionPostfix();

String getExportName (Service s, SOAP prot) : 
	s.getOrgNamespace().toPrefix() + "_" + s.getSubdomain().name.replaceAll("\\.", "_") + "_" + 
	s.name + "SOAP" + s.getServiceVisibilityName() + "_" + s.version.toVersionPostfix();

String getExportName (Service s, SCA prot) : 
	prot.promote != null ?
		prot.promote
	:
		(s.getOrgNamespace().toPrefix() + "_" + s.getSubdomain().name.replaceAll("\\.", "_") + "_" + 
		s.name + "SCA" + s.getServiceVisibilityName() + "_" + s.version.toVersionPostfix());

String getExportDisplayName (Service s, BindingProtocol prot) : 
	s.getOrgNamespace().toPrefix() + "." + s.getSubdomain().name.replaceAll("\\.", ".") + "." + 
	s.name + s.getServiceVisibilityName() + "." + s.version.toVersionPostfix();

String getExportDisplayName (Service s, SOAP prot) : 
	s.getOrgNamespace().toPrefix() + "." + s.getSubdomain().name.replaceAll("\\.", ".") + "." + 
	s.name + "SOAP" + s.getServiceVisibilityName() + "." + s.version.toVersionPostfix();

String getExportDisplayName (Service s, SCA prot) : 
	prot.promote != null ?
		prot.promote
	:
		(s.getOrgNamespace().toPrefix() + "." + s.getSubdomain().name.replaceAll("\\.", ".") + "." + 
		s.name + "SCA" + s.getServiceVisibilityName() + "." + s.version.toVersionPostfix());

	
String getExportFileName (Service s, BindingProtocol prot) : s.getExportName (prot) + ".export";

